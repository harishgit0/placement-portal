{% extends "base_admin.html" %}

{% block title %}Students{% endblock %}

{% block content %}
<div class="container mt-4">
    <h3 class="mb-3">Student List</h3>

    {% if students %}
    <table class="table table-bordered table-striped align-middle">
        <thead class="table-dark">
            <tr>
                <th>Name</th>
                <th>Roll No</th>
                <th>Department</th>
                <th>CGPA</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>

        <tbody>
            {% for student in students %}
            <tr>
                <td>{{ student.name }}</td>
                <td>{{ student.roll_no }}</td>
                <td>{{ student.department }}</td>
                <td>{{ student.cgpa }}</td>

                <!-- Status -->
                <td>
                    {% if student.is_blacklisted %}
                        <span class="badge bg-danger">Blacklisted</span>
                    {% else %}
                        <span class="badge bg-success">Active</span>
                    {% endif %}
                </td>

                <!-- Action -->
                <td>
                    {% if not student.is_blacklisted %}
                    <form action="{{ url_for('student_blacklist', student_id=student.id) }}"
                          method="POST"
                          class="d-inline">
                        <button type="submit"
                                class="btn btn-outline-danger btn-sm"
                                onclick="return confirm('Blacklist this student?')">
                            Blacklist
                        </button>
                    </form>
                    {% else %}
                        <span class="text-muted">â€”</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p class="text-muted">No students found.</p>
    {% endif %}
</div>
{% endblock %}
